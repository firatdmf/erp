{% load humanize %}
<style>
    .note-card {
        padding: 12px 16px;
        border-bottom: 1px solid #f3f4f6;
        cursor: pointer;
        transition: background 0.1s;
    }

    .note-card:hover {
        background-color: #f9fafb;
    }

    .note-card.active {
        background-color: #eff6ff;
        border-left: 3px solid #3b82f6;
    }

    .note-card-title {
        font-weight: 600;
        font-size: 14px;
        color: #111827;
        margin-bottom: 4px;
        display: flex;
        justify-content: space-between;
    }

    .note-card-preview {
        font-size: 12px;
        color: #6b7280;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-bottom: 8px;
    }

    .note-card-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 11px;
        color: #9ca3af;
    }

    .priority-badge {
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
        text-transform: capitalize;
    }

    .priority-high {
        background: #fee2e2;
        color: #dc2626;
    }

    .priority-medium {
        background: #fef3c7;
        color: #d97706;
    }

    .priority-low {
        background: #d1fae5;
        color: #059669;
    }
</style>

{% for note in notes %}
<div class="note-card" hx-get="{% url 'notes:note_detail' note.id %}" hx-target="#noteDetailContainer"
    onclick="document.querySelectorAll('.note-card').forEach(el => el.classList.remove('active')); this.classList.add('active');">
    <div class="note-card-title">
        <span>{{ note.title }}</span>
        {% if note.is_favorite %}
        <i class="fas fa-star text-yellow-400" style="color: #f59e0b;"></i>
        {% endif %}
    </div>
    <div class="note-card-preview">
        {{ note.content|striptags|default:"No content" }}
    </div>
    <div class="note-card-meta">
        <span>{{ note.updated_at|date:"M d" }}</span>
        <div>
            {% if note.attachments.exists %}
            <i class="fas fa-paperclip" style="margin-right: 4px;"></i> {{ note.attachments.count }}
            {% endif %}
            <span class="priority-badge priority-{{ note.priority }}">{{ note.priority }}</span>
        </div>
    </div>
</div>
{% empty %}
<div style="padding: 20px; text-align: center; color: #9ca3af; font-size: 13px;">
    No notes found.
</div>
{% endfor %}