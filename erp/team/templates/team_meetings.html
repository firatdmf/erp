{% extends 'base.html' %}

{% block title %}Team Meetings | Nejum ERP{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 2rem; background: #f9fafb; min-height: calc(100vh - 80px);">
  <h1 style="margin: 0 0 2rem 0; color: #111827;">üìÖ Team Meetings</h1>

  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
    <!-- Schedule New Meeting -->
    <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
      <h2 style="margin: 0 0 1.5rem 0; color: #111827;">Schedule Meeting</h2>
      <form method="post" style="display: flex; flex-direction: column; gap: 1rem;">
        {% csrf_token %}
        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Title</label>
          <input type="text" name="title" placeholder="Meeting title" required style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 6px; box-sizing: border-box;">
        </div>
        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Date & Time</label>
          <input type="datetime-local" name="scheduled_at" required style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 6px; box-sizing: border-box;">
        </div>
        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Duration (minutes)</label>
          <input type="number" name="duration_minutes" value="60" style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 6px; box-sizing: border-box;">
        </div>
        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Meeting Link (Zoom/Teams)</label>
          <input type="url" name="meeting_link" placeholder="https://..." style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 6px; box-sizing: border-box;">
        </div>
        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Location</label>
          <input type="text" name="location" placeholder="Office, Room 101..." style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 6px; box-sizing: border-box;">
        </div>
        <button type="submit" style="padding: 0.75rem 1.5rem; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">Schedule Meeting</button>
      </form>
    </div>

    <!-- Upcoming Meetings -->
    <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
      <h2 style="margin: 0 0 1.5rem 0; color: #111827;">Upcoming Meetings</h2>
      {% if upcoming_meetings %}
        {% for meeting in upcoming_meetings %}
          <div style="padding: 1rem; background: #f9fafb; border-radius: 8px; margin-bottom: 1rem;">
            <h3 style="margin: 0 0 0.5rem 0;">{{ meeting.title }}</h3>
            <p style="margin: 0.25rem 0; color: #6b7280;">
              <strong>üìÖ {{ meeting.scheduled_at|date:"M d, Y H:i" }}</strong><br>
              ‚è±Ô∏è {{ meeting.duration_minutes }} minutes
            </p>
            {% if meeting.meeting_link %}
              <p style="margin: 0.25rem 0;">
                <a href="{{ meeting.meeting_link }}" target="_blank" style="color: #2563eb; text-decoration: none;">Join Meeting ‚Üí</a>
              </p>
            {% endif %}
            {% if meeting.location %}
              <p style="margin: 0.25rem 0; color: #6b7280;">üìç {{ meeting.location }}</p>
            {% endif %}
          </div>
        {% endfor %}
      {% else %}
        <p style="color: #6b7280; text-align: center;">No upcoming meetings</p>
      {% endif %}
    </div>
  </div>

  <!-- All Meetings -->
  <div style="margin-top: 2rem; background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
    <h2 style="margin: 0 0 1.5rem 0; color: #111827;">All Meetings</h2>
    {% if all_meetings %}
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="border-bottom: 2px solid #e5e7eb;">
            <th style="padding: 1rem; text-align: left; color: #6b7280;">Title</th>
            <th style="padding: 1rem; text-align: left; color: #6b7280;">Date & Time</th>
            <th style="padding: 1rem; text-align: left; color: #6b7280;">Organizer</th>
            <th style="padding: 1rem; text-align: left; color: #6b7280;">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for meeting in all_meetings %}
            <tr style="border-bottom: 1px solid #e5e7eb;">
              <td style="padding: 1rem;"><strong>{{ meeting.title }}</strong></td>
              <td style="padding: 1rem;">{{ meeting.scheduled_at|date:"M d, Y H:i" }}</td>
              <td style="padding: 1rem;">{{ meeting.organizer.get_full_name }}</td>
              <td style="padding: 1rem;">
                <span style="padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem; font-weight: 600; background: {% if meeting.status == 'scheduled' %}#eff6ff{% elif meeting.status == 'ongoing' %}#fef3c7{% elif meeting.status == 'completed' %}#dcfce7{% else %}#fee2e2{% endif %}; color: {% if meeting.status == 'scheduled' %}#2563eb{% elif meeting.status == 'ongoing' %}#d97706{% elif meeting.status == 'completed' %}#16a34a{% else %}#dc2626{% endif %};">
                  {{ meeting.get_status_display }}
                </span>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p style="color: #6b7280; text-align: center;">No meetings yet</p>
    {% endif %}
  </div>
</div>
{% endblock %}
